# Test info

- Name: Checking permissions >> Check UI Game Manager permission
- Location: /home/runner/work/qa-automated-tests/qa-automated-tests/tests/ngf.test.js:611:7

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toBeVisible()

Locator: getByTestId('create-button')
Expected: visible
Received: <element(s) not found>
Call log:
  - expect.toBeVisible with timeout 5000ms
  - waiting for getByTestId('create-button')

    at /home/runner/work/qa-automated-tests/qa-automated-tests/tests/ngf.test.js:621:55
    at /home/runner/work/qa-automated-tests/qa-automated-tests/tests/ngf.test.js:620:16
```

# Page snapshot

```yaml
- link "Mobalytics":
  - /url: /poe-2
  - img "Mobalytics"
- link "League of Legends LoL":
  - /url: https://stg.mobalytics.gg/lol
  - img "League of Legends"
  - text: LoL
- link "Teamfight Tactics TFT":
  - /url: https://stg.mobalytics.gg/tft
  - img "Teamfight Tactics"
  - text: TFT
- link "Path of Exile 2 PoE 2":
  - /url: https://stg.mobalytics.gg/poe-2
  - img "Path of Exile 2"
  - text: PoE 2
- link "Diablo 4 Diablo 4":
  - /url: https://stg.mobalytics.gg/diablo-4
  - img "Diablo 4"
  - text: Diablo 4
- link "Elden Ring Nightreign Nightreign New":
  - /url: https://stg.mobalytics.gg/elden-ring-nightreign
  - img "Elden Ring Nightreign"
  - text: Nightreign New
- link "Deadlock Deadlock":
  - /url: https://stg.mobalytics.gg/deadlock
  - img "Deadlock"
  - text: Deadlock
- link "Valorant VAL":
  - /url: https://stg.mobalytics.gg/valorant
  - img "Valorant"
  - text: VAL
- link "Monster Hunter Wilds Monster Hunter Wilds":
  - /url: https://stg.mobalytics.gg/mhw
  - img "Monster Hunter Wilds"
  - text: Monster Hunter Wilds
- link "Destiny 2 Destiny 2":
  - /url: https://stg.mobalytics.gg/destiny-2
  - img "Destiny 2"
  - text: Destiny 2
- link "Lost Ark Lost Ark":
  - /url: https://stg.mobalytics.gg/lost-ark
  - img "Lost Ark"
  - text: Lost Ark
- button:
  - img
- link "Example game ExG":
  - /url: https://stg.mobalytics.gg/example-game
  - img "Example game"
  - text: ExG
- link "The Bazaar The Bazaar":
  - /url: https://stg.mobalytics.gg/the-bazaar
  - img "The Bazaar"
  - text: The Bazaar
- link "Marvel Rivals Marvel Rivals":
  - /url: https://stg.mobalytics.gg/marvel-rivals
  - img "Marvel Rivals"
  - text: Marvel Rivals
- link "Zenless Zone Zero ZZZ New":
  - /url: https://stg.mobalytics.gg/zzz
  - img "Zenless Zone Zero"
  - text: ZZZ New
- link "win logo Download app":
  - /url: /lol/glp/download-welcome?Channel=web_dl_btn&utm_campaign=top-poe-2&utm_medium=homepage&utm_source=web
  - button "win logo Download app":
    - img "win logo"
    - text: Download app
- img
- textbox "global search input"
- text: Community
- button "Remove Ads"
- img "settings"
- img "support"
- link "Home":
  - /url: /poe-2
  - img "Home"
- link "Profile":
  - /url: /poe-2/profile
  - img "Profile"
- link "Build Planner":
  - /url: /poe-2/planner/builds
  - img "Build Planner"
- link "Tier List":
  - /url: /poe-2/tier-list
  - img "Tier List"
- link "Starter Builds":
  - /url: /poe-2/starter-builds
  - img "Starter Builds"
- link "Builds":
  - /url: /poe-2/builds
  - img "Builds"
- link "Creators":
  - /url: /poe-2/creators
  - img "Creators"
- link "Guides":
  - /url: /poe-2/guides
  - img "Guides"
- main:
  - heading "Structure Pages" [level=1]
  - text: /1180
  - link "Edit":
    - /url: /poe-2/1180
  - text: /1181
  - link "Edit":
    - /url: /poe-2/1181
  - text: /1183
  - link "Edit":
    - /url: /poe-2/1183
  - text: /1184
  - link "Edit":
    - /url: /poe-2/1184
  - text: /1185
  - link "Edit":
    - /url: /poe-2/1185
  - text: /1186
  - link "Edit":
    - /url: /poe-2/1186
  - text: /1188-1-203-4-rc-2
  - link "Edit":
    - /url: /poe-2/1188-1-203-4-rc-2
  - text: /1188-duplicate
  - link "Edit":
    - /url: /poe-2/1188-duplicate
  - text: /1189
  - link "Edit":
    - /url: /poe-2/1189
  - text: /1189-duplicate
  - link "Edit":
    - /url: /poe-2/1189-duplicate
  - text: /1190
  - link "Edit":
    - /url: /poe-2/1190
  - text: /1194
  - link "Edit":
    - /url: /poe-2/1194
  - text: /1195
  - link "Edit":
    - /url: /poe-2/1195
  - text: /1197
  - link "Edit":
    - /url: /poe-2/1197
  - text: /1198
  - link "Edit":
    - /url: /poe-2/1198
  - text: /1198-duplicate-from-1197
  - link "Edit":
    - /url: /poe-2/1198-duplicate-from-1197
  - text: /1202
  - link "Edit":
    - /url: /poe-2/1202
  - text: /1203
  - link "Edit":
    - /url: /poe-2/1203
  - text: /1206
  - link "Edit":
    - /url: /poe-2/1206
  - text: /1-207-0
  - link "Edit":
    - /url: /poe-2/1-207-0
  - text: /1210
  - link "Edit":
    - /url: /poe-2/1210
  - text: /1212
  - link "Edit":
    - /url: /poe-2/1212
  - text: /1218
  - link "Edit":
    - /url: /poe-2/1218
  - text: /1955-ngf-1344
  - link "Edit":
    - /url: /poe-2/1955-ngf-1344
  - text: /2019
  - link "Edit":
    - /url: /poe-2/2019
  - text: /2020-external-links
  - link "Edit":
    - /url: /poe-2/2020-external-links
  - text: /2021-external-links-img
  - link "Edit":
    - /url: /poe-2/2021-external-links-img
  - text: /2022
  - link "Edit":
    - /url: /poe-2/2022
  - text: /2022-external-link-stg
  - link "Edit":
    - /url: /poe-2/2022-external-link-stg
  - text: /2023
  - link "Edit":
    - /url: /poe-2/2023
  - text: /2024
  - link "Edit":
    - /url: /poe-2/2024
  - text: /2024-external-links-2nd-iteration
  - link "Edit":
    - /url: /poe-2/2024-external-links-2nd-iteration
  - text: /2024-external-links-2nd-iteration-lastretest
  - link "Edit":
    - /url: /poe-2/2024-external-links-2nd-iteration-lastretest
  - text: /2024-external-links-2nd-iteration-retest
  - link "Edit":
    - /url: /poe-2/2024-external-links-2nd-iteration-retest
  - text: /2024-external-links-2nd-iteration-stg
  - link "Edit":
    - /url: /poe-2/2024-external-links-2nd-iteration-stg
  - text: /2025
  - link "Edit":
    - /url: /poe-2/2025
  - text: /2025-stg-smoke
  - link "Edit":
    - /url: /poe-2/2025-stg-smoke
  - text: /2026
  - link "Edit":
    - /url: /poe-2/2026
  - text: /2027
  - link "Edit":
    - /url: /poe-2/2027
  - text: /2028-stg-smoke
  - link "Edit":
    - /url: /poe-2/2028-stg-smoke
  - text: /2030-upload-video-img
  - link "Edit":
    - /url: /poe-2/2030-upload-video-img
  - text: /2033
  - link "Edit":
    - /url: /poe-2/2033
  - text: /2034
  - link "Edit":
    - /url: /poe-2/2034
  - text: /2035
  - link "Edit":
    - /url: /poe-2/2035
  - text: /2040
  - link "Edit":
    - /url: /poe-2/2040
  - text: /444555666
  - link "Edit":
    - /url: /poe-2/444555666
  - text: /adas
  - link "Edit":
    - /url: /poe-2/adas
  - text: /adminstpage
  - link "Edit":
    - /url: /poe-2/adminstpage
  - text: /asda
  - link "Edit":
    - /url: /poe-2/asda
  - text: /asdadasdsa
  - link "Edit":
    - /url: /poe-2/asdadasdsa
  - text: /asdasdas
  - link "Edit":
    - /url: /poe-2/asdasdas
  - text: /asdsadasd
  - link "Edit":
    - /url: /poe-2/asdsadasd
  - text: /base-64
  - link "Edit":
    - /url: /poe-2/base-64
  - text: /builds
  - link "Edit":
    - /url: /poe-2/builds
  - text: /builds/ra-builds
  - link "Edit":
    - /url: /poe-2/builds/ra-builds
  - text: /build-variants
  - link "Edit":
    - /url: /poe-2/build-variants
  - text: /build-variants-1
  - link "Edit":
    - /url: /poe-2/build-variants-1
  - text: /build-variants-2
  - link "Edit":
    - /url: /poe-2/build-variants-2
  - text: /build-variants-3
  - link "Edit":
    - /url: /poe-2/build-variants-3
  - text: /build-variants-3-4
  - link "Edit":
    - /url: /poe-2/build-variants-3-4
  - text: /card-grid-large-images-test-by-ra
  - link "Edit":
    - /url: /poe-2/card-grid-large-images-test-by-ra
  - text: /chto
  - link "Edit":
    - /url: /poe-2/chto
  - text: /community-builds
  - link "Edit":
    - /url: /poe-2/community-builds
  - text: /creators
  - link "Edit":
    - /url: /poe-2/creators
  - text: /disc
  - link "Edit":
    - /url: /poe-2/disc
  - text: /discovery-edit-test
  - link "Edit":
    - /url: /poe-2/discovery-edit-test
  - text: /discroverty-1
  - link "Edit":
    - /url: /poe-2/discroverty-1
  - text: /duplicate-1-195-4
  - link "Edit":
    - /url: /poe-2/duplicate-1-195-4
  - text: /duplicate-1-205-1
  - link "Edit":
    - /url: /poe-2/duplicate-1-205-1
  - text: /duplicateadminstpage
  - link "Edit":
    - /url: /poe-2/duplicateadminstpage
  - text: /duplicate-changes--1-195-4
  - link "Edit":
    - /url: /poe-2/duplicate-changes--1-195-4
  - text: /ehhloasd
  - link "Edit":
    - /url: /poe-2/ehhloasd
  - text: /el-4
  - link "Edit":
    - /url: /poe-2/el-4
  - text: /el-test-10
  - link "Edit":
    - /url: /poe-2/el-test-10
  - text: /el-test-11
  - link "Edit":
    - /url: /poe-2/el-test-11
  - text: /el-test-12
  - link "Edit":
    - /url: /poe-2/el-test-12
  - text: /fghjkolp
  - link "Edit":
    - /url: /poe-2/fghjkolp
  - text: /full-w-img
  - link "Edit":
    - /url: /poe-2/full-w-img
  - text: /game-specific-discovery
  - link "Edit":
    - /url: /poe-2/game-specific-discovery
  - text: /guides
  - link "Edit":
    - /url: /poe-2/guides
  - text: /header
  - link "Edit":
    - /url: /poe-2/header
  - text: /helll-das
  - link "Edit":
    - /url: /poe-2/helll-das
  - text: /hello
  - link "Edit":
    - /url: /poe-2/hello
  - text: /hello-dec
  - link "Edit":
    - /url: /poe-2/hello-dec
  - text: /hellods-1
  - link "Edit":
    - /url: /poe-2/hellods-1
  - text: /helloo
  - link "Edit":
    - /url: /poe-2/helloo
  - text: /hello/world
  - link "Edit":
    - /url: /poe-2/hello/world
  - text: /home
  - link "Edit":
    - /url: /poe-2/home
  - text: /info-app-version-1-232-0
  - link "Edit":
    - /url: /poe-2/info-app-version-1-232-0
  - text: /links-grid-v1
  - link "Edit":
    - /url: /poe-2/links-grid-v1
  - text: /ngf-1344-1522
  - link "Edit":
    - /url: /poe-2/ngf-1344-1522
  - text: /ngf-1503
  - link "Edit":
    - /url: /poe-2/ngf-1503
  - text: /ngf-1579
  - link "Edit":
    - /url: /poe-2/ngf-1579
  - text: /ngf-1646
  - link "Edit":
    - /url: /poe-2/ngf-1646
  - text: /ngf-1646-fixes
  - link "Edit":
    - /url: /poe-2/ngf-1646-fixes
  - text: /ololo-123
  - link "Edit":
    - /url: /poe-2/ololo-123
  - text: /ololo13123
  - link "Edit":
    - /url: /poe-2/ololo13123
  - text: /olololo
  - link "Edit":
    - /url: /poe-2/olololo
  - text: /opa
  - link "Edit":
    - /url: /poe-2/opa
  - text: /opa-opa-opa
  - link "Edit":
    - /url: /poe-2/opa-opa-opa
  - text: /poe-2-home-duplicate
  - link "Edit":
    - /url: /poe-2/poe-2-home-duplicate
  - text: /ra-test/random-gif
  - link "Edit":
    - /url: /poe-2/ra-test/random-gif
  - text: /regress-1-185-6-rc-1-duplicate
  - link "Edit":
    - /url: /poe-2/regress-1-185-6-rc-1-duplicate
  - text: /regress-2nd-part-1-183-1-rc-21
  - link "Edit":
    - /url: /poe-2/regress-2nd-part-1-183-1-rc-21
  - text: /regress-3rd-part-1-183-1-rc-21
  - link "Edit":
    - /url: /poe-2/regress-3rd-part-1-183-1-rc-21
  - text: /regress-part-1-183-1-rc-21
  - link "Edit":
    - /url: /poe-2/regress-part-1-183-1-rc-21
  - text: /regress-part-1-183-1-rc-21-duplicate
  - link "Edit":
    - /url: /poe-2/regress-part-1-183-1-rc-21-duplicate
  - text: /smoke-1-181-9
  - link "Edit":
    - /url: /poe-2/smoke-1-181-9
  - text: /st-7965
  - link "Edit":
    - /url: /poe-2/st-7965
  - text: /st-9697
  - link "Edit":
    - /url: /poe-2/st-9697
  - text: /st-acc
  - link "Edit":
    - /url: /poe-2/st-acc
  - text: /st-armor
  - link "Edit":
    - /url: /poe-2/st-armor
  - text: /starter-builds
  - link "Edit":
    - /url: /poe-2/starter-builds
  - text: /st-blablabla
  - link "Edit":
    - /url: /poe-2/st-blablabla
  - text: /st-community-guides
  - link "Edit":
    - /url: /poe-2/st-community-guides
  - text: /stg-upload
  - link "Edit":
    - /url: /poe-2/stg-upload
  - text: /st-tier-list-test
  - link "Edit":
    - /url: /poe-2/st-tier-list-test
  - text: /table-scroll
  - link "Edit":
    - /url: /poe-2/table-scroll
  - text: /test1
  - link "Edit":
    - /url: /poe-2/test1
  - text: /test-123
  - link "Edit":
    - /url: /poe-2/test-123
  - text: /test-1-2-3
  - link "Edit":
    - /url: /poe-2/test-1-2-3
  - text: /test-12345
  - link "Edit":
    - /url: /poe-2/test-12345
  - text: /test-3-2-1
  - link "Edit":
    - /url: /poe-2/test-3-2-1
  - text: /test-dublicated-info-app-version-1-232-0
  - link "Edit":
    - /url: /poe-2/test-dublicated-info-app-version-1-232-0
  - text: /test-int-c
  - link "Edit":
    - /url: /poe-2/test-int-c
  - text: /test-int-discovery-filter-fix
  - link "Edit":
    - /url: /poe-2/test-int-discovery-filter-fix
  - text: /test-int-permission-mapping-poe
  - link "Edit":
    - /url: /poe-2/test-int-permission-mapping-poe
  - text: /test-int-poe2-all-widgets-header-controls-el
  - link "Edit":
    - /url: /poe-2/test-int-poe2-all-widgets-header-controls-el
  - text: /test-int-poe2-discovery-andrey
  - link "Edit":
    - /url: /poe-2/test-int-poe2-discovery-andrey
  - text: /test-int-poe2-discovery-el
  - link "Edit":
    - /url: /poe-2/test-int-poe2-discovery-el
  - text: /test-int-poe2-discovery-el2-new-fix
  - link "Edit":
    - /url: /poe-2/test-int-poe2-discovery-el2-new-fix
  - text: /test-int-poe2-discovery-preview-compact-el-stas
  - link "Edit":
    - /url: /poe-2/test-int-poe2-discovery-preview-compact-el-stas
  - text: /test-int-poe2-discovery-preview-el-stas
  - link "Edit":
    - /url: /poe-2/test-int-poe2-discovery-preview-el-stas
  - text: /test-int-poe2-discovery-widgets-tier-list
  - link "Edit":
    - /url: /poe-2/test-int-poe2-discovery-widgets-tier-list
  - text: /test-int-poe2-doc-discovery-1
  - link "Edit":
    - /url: /poe-2/test-int-poe2-doc-discovery-1
  - text: /test-int-poe2-doc-discovery-andrey
  - link "Edit":
    - /url: /poe-2/test-int-poe2-doc-discovery-andrey
  - text: /test-int-poe2-doc-discovery-el-stas
  - link "Edit":
    - /url: /poe-2/test-int-poe2-doc-discovery-el-stas
  - text: /test-int-poe2-doc-feed-andrey
  - link "Edit":
    - /url: /poe-2/test-int-poe2-doc-feed-andrey
  - text: /test-int-poe2-doc-feed-el-stas
  - link "Edit":
    - /url: /poe-2/test-int-poe2-doc-feed-el-stas
  - text: /test-int-poe2-mobile-improvement
  - link "Edit":
    - /url: /poe-2/test-int-poe2-mobile-improvement
  - text: /test-int-poe2-mobile-improvement-stas
  - link "Edit":
    - /url: /poe-2/test-int-poe2-mobile-improvement-stas
  - text: /test-int-poe2-sticky
  - link "Edit":
    - /url: /poe-2/test-int-poe2-sticky
  - text: /test-int-poe2-tierlist-el-stas
  - link "Edit":
    - /url: /poe-2/test-int-poe2-tierlist-el-stas
  - text: /test-int-safecontexttypecast-poe
  - link "Edit":
    - /url: /poe-2/test-int-safecontexttypecast-poe
  - text: /test-int-tierlist-tierslug-poe
  - link "Edit":
    - /url: /poe-2/test-int-tierlist-tierslug-poe
  - text: /test-mapping-permission
  - link "Edit":
    - /url: /poe-2/test-mapping-permission
  - text: /test-page-2
  - link "Edit":
    - /url: /poe-2/test-page-2
  - text: /test-poe2-int-fix-tegs
  - link "Edit":
    - /url: /poe-2/test-poe2-int-fix-tegs
  - text: /test-poe2-int-large-screen
  - link "Edit":
    - /url: /poe-2/test-poe2-int-large-screen
  - text: /test-poe2-int-rt-transformation
  - link "Edit":
    - /url: /poe-2/test-poe2-int-rt-transformation
  - text: /test-poe2-stg-grabber-bug
  - link "Edit":
    - /url: /poe-2/test-poe2-stg-grabber-bug
  - text: /test-poe-int-widgets-refactoring-el
  - link "Edit":
    - /url: /poe-2/test-poe-int-widgets-refactoring-el
  - text: /test-rtv2-toc-stg1-poe
  - link "Edit":
    - /url: /poe-2/test-rtv2-toc-stg1-poe
  - text: /test-stg-cg-character-limit
  - link "Edit":
    - /url: /poe-2/test-stg-cg-character-limit
  - text: /test-stg-discovery-filter-fix
  - link "Edit":
    - /url: /poe-2/test-stg-discovery-filter-fix
  - text: /test-stg-permission-poe
  - link "Edit":
    - /url: /poe-2/test-stg-permission-poe
  - text: /test-stg-poe2-denis-request
  - link "Edit":
    - /url: /poe-2/test-stg-poe2-denis-request
  - text: /test-stg-poe2-discovery-el
  - link "Edit":
    - /url: /poe-2/test-stg-poe2-discovery-el
  - text: /test-stg-poe2-discovery-preview-compact-el-stas
  - link "Edit":
    - /url: /poe-2/test-stg-poe2-discovery-preview-compact-el-stas
  - text: /test-stg-poe2-discovery-preview-el-stas
  - link "Edit":
    - /url: /poe-2/test-stg-poe2-discovery-preview-el-stas
  - text: /test-stg-poe2-doc-discovery-andrey
  - link "Edit":
    - /url: /poe-2/test-stg-poe2-doc-discovery-andrey
  - text: /test-stg-poe2-doc-discovery-el-stas
  - link "Edit":
    - /url: /poe-2/test-stg-poe2-doc-discovery-el-stas
  - text: /test-stg-poe2-doc-discovery-tier-list-1
  - link "Edit":
    - /url: /poe-2/test-stg-poe2-doc-discovery-tier-list-1
  - text: /test-stg-poe2-doc-feed-el-stas
  - link "Edit":
    - /url: /poe-2/test-stg-poe2-doc-feed-el-stas
  - text: /test-stg-poe2-el
  - link "Edit":
    - /url: /poe-2/test-stg-poe2-el
  - text: /test-stg-poe2-tierlist-el-stas
  - link "Edit":
    - /url: /poe-2/test-stg-poe2-tierlist-el-stas
  - text: /test-stg-poe-doc-discovery-fix-el
  - link "Edit":
    - /url: /poe-2/test-stg-poe-doc-discovery-fix-el
  - text: /test-stg-tierlist-tierslug-poe
  - link "Edit":
    - /url: /poe-2/test-stg-tierlist-tierslug-poe
  - text: /tier-list
  - link "Edit":
    - /url: /poe-2/tier-list
  - text: /var-1-2-3
  - link "Edit":
    - /url: /poe-2/var-1-2-3
  - text: /variants-long-title
  - link "Edit":
    - /url: /poe-2/variants-long-title
- complementary: Remove Ads
- banner: Advertisement Remove Ads
- text: Remove all ads Say goodbye to ads, support our team, see exclusive sneak peeks, and get a shiny new Discord role.
- button "Remove ads"
```

# Test source

```ts
  521 |   test("Check UI admin permission", async ({ page, apiAuthAdmin }) => {
  522 |     await page.context().addCookies(apiAuthAdmin.cookies);
  523 |     const moba = new Moba(page);
  524 |     const title = "Structure Pages";
  525 |
  526 |     await moba.mainURLs.openAdminStgPoePage();
  527 |     await test.step(`User is logged in`, async () => {
  528 |       await expect(moba.stAdminPage.createPageButton).toBeVisible();
  529 |       await expect(moba.stAdminPage.stAdminTitle(title)).toContainText(title);
  530 |     });
  531 |   });
  532 |
  533 |   test("Check API admin permission", async ({ request, apiAuthAdmin }) => {
  534 |     const adminRoleResponse = await request.post(
  535 |       "https://stg.mobalytics.gg/api/poe-2/v1/graphql/query",
  536 |       {
  537 |         data: {
  538 |           query: `
  539 |             query Poe2 {
  540 |                 poe2 {
  541 |                     id
  542 |                     permissions {
  543 |                         user {
  544 |                             id
  545 |                             role
  546 |                         }
  547 |                     }
  548 |                 }
  549 |             }
  550 |         `,
  551 |         },
  552 |         headers: {
  553 |           "Content-Type": "application/json",
  554 |         },
  555 |       }
  556 |     );
  557 |     expect(adminRoleResponse.ok()).toBeTruthy();
  558 |     const json = await adminRoleResponse.json();
  559 |     const role = json.data.poe2.permissions.user.role;
  560 |     expect(role).toBe("ADMIN");
  561 |   });
  562 |
  563 |   test("Check UI Internal Writer permission", async ({
  564 |     page,
  565 |     apiAuthInternalWriter,
  566 |   }) => {
  567 |     await page.context().addCookies(apiAuthInternalWriter.cookies);
  568 |     const moba = new Moba(page);
  569 |     const title = "Structure Pages";
  570 |
  571 |     await moba.mainURLs.openAdminStgPoePage();
  572 |     await test.step(`User is logged in`, async () => {
  573 |       await expect(moba.stAdminPage.createPageButton).toBeVisible();
  574 |       await expect(moba.stAdminPage.stAdminTitle(title)).toContainText(title);
  575 |     });
  576 |   });
  577 |
  578 |   test("Check API Internal Writer permission", async ({
  579 |     request,
  580 |     apiAuthInternalWriter,
  581 |   }) => {
  582 |     const adminRoleResponse = await request.post(
  583 |       "https://stg.mobalytics.gg/api/poe-2/v1/graphql/query",
  584 |       {
  585 |         data: {
  586 |           query: `
  587 |             query Poe2 {
  588 |                 poe2 {
  589 |                     id
  590 |                     permissions {
  591 |                         user {
  592 |                             id
  593 |                             role
  594 |                         }
  595 |                     }
  596 |                 }
  597 |             }
  598 |         `,
  599 |         },
  600 |         headers: {
  601 |           "Content-Type": "application/json",
  602 |         },
  603 |       }
  604 |     );
  605 |     expect(adminRoleResponse.ok()).toBeTruthy();
  606 |     const json = await adminRoleResponse.json();
  607 |     const role = json.data.poe2.permissions.user.role;
  608 |     expect(role).toBe("INTERNAL_WRITER");
  609 |   });
  610 |
  611 |   test("Check UI Game Manager permission", async ({
  612 |     page,
  613 |     apiAuthGameManager,
  614 |   }) => {
  615 |     await page.context().addCookies(apiAuthGameManager.cookies);
  616 |     const moba = new Moba(page);
  617 |     const title = "Structure Pages";
  618 |
  619 |     await moba.mainURLs.openAdminStgPoePage();
  620 |     await test.step(`User is logged in`, async () => {
> 621 |       await expect(moba.stAdminPage.createPageButton).toBeVisible();
      |                                                       ^ Error: Timed out 5000ms waiting for expect(locator).toBeVisible()
  622 |       await expect(moba.stAdminPage.stAdminTitle(title)).toContainText(title);
  623 |     });
  624 |   });
  625 |
  626 |   test("Check API Game Manager permission", async ({
  627 |     request,
  628 |     apiAuthGameManager,
  629 |   }) => {
  630 |     const adminRoleResponse = await request.post(
  631 |       "https://stg.mobalytics.gg/api/poe-2/v1/graphql/query",
  632 |       {
  633 |         data: {
  634 |           query: `
  635 |             query Poe2 {
  636 |                 poe2 {
  637 |                     id
  638 |                     permissions {
  639 |                         user {
  640 |                             id
  641 |                             role
  642 |                         }
  643 |                     }
  644 |                 }
  645 |             }
  646 |         `,
  647 |         },
  648 |         headers: {
  649 |           "Content-Type": "application/json",
  650 |         },
  651 |       }
  652 |     );
  653 |     expect(adminRoleResponse.ok()).toBeTruthy();
  654 |     const json = await adminRoleResponse.json();
  655 |     const role = json.data.poe2.permissions.user.role;
  656 |     expect(role).toBe("GAME_MANAGER");
  657 |   });
  658 | });
  659 |
```