# Test info

- Name: Checking role permissions >> Admin permission >> Admin role can add image into widgets (link) to the structure pages
- Location: /home/runner/work/qa-automated-tests/qa-automated-tests/e2e-tests/tests/ngf.test.js:714:9

# Error details

```
Error: locator.click: Test timeout of 30000ms exceeded.
Call log:
  - waiting for getByRole('button', { name: 'Add' })
    - locator resolved to <button type="submit" class="x1n2onr6 x19l6gds x19jf9pv x78zum5 x6s0dn4 x167g77z xlkovuz x1ypdohk xuxw1ft x10w6t97 x84vhe8 xl56j7k x1hxq2kj x1kylzug x1bi3egf xnfrvnh">Add</button>
  - attempting click action
    - waiting for element to be visible, enabled and stable
    - element is visible, enabled and stable
    - scrolling into view if needed
    - done scrolling

    at /home/runner/work/qa-automated-tests/qa-automated-tests/src/page-object/cardGalleryV2Widget.js:22:35
    at CardGalleryV2Widget.addImageLink (/home/runner/work/qa-automated-tests/qa-automated-tests/src/page-object/cardGalleryV2Widget.js:17:5)
    at /home/runner/work/qa-automated-tests/qa-automated-tests/e2e-tests/tests/ngf.test.js:730:7
```

# Page snapshot

```yaml
- dialog:
  - text: Add card
  - button:
    - img
  - text: Title
  - textbox "Title"
  - text: Subtitle (Optional)
  - textbox "Subtitle (Optional)"
  - text: Link URL
  - textbox "Link URL": /
  - text: Open link in a new tab
  - checkbox "Open link in a new tab"
  - text: Background image (Optional)
  - radiogroup:
    - radio "Upload"
    - text: Upload
    - radio "Link" [checked]
    - text: Link
    - radio "Advanced CSS"
    - text: Advanced CSS
  - textbox "Background image (Optional) Upload Link Advanced CSS": https://cdn.mobalytics.gg/cdn-cgi/image/format=auto,width=1150/assets/diablo-4/images/background-images/classes/sorcerer.jpg
  - button "Cancel"
  - button "Add"
```

# Test source

```ts
   1 | import { StPage } from "./stPage";
   2 | import { test } from "@playwright/test";
   3 |
   4 | export class CardGalleryV2Widget extends StPage {
   5 |   constructor(page) {
   6 |     super(page);
   7 |     this.plusButton = page.locator(".xg1i4pw > .x19l6gds");
   8 |     this.linkButtonInModal = page.getByText("Link", { exact: true });
   9 |     this.inputBackgroundImageInModal = page.getByRole("textbox", {
  10 |       name: "Background image (Optional)",
  11 |     });
  12 |     this.addButtonInModal = page.getByRole("button", { name: "Add" });
  13 |     this.сardGalleryV2Widget = page.getByText("Cards Gallery V2Title");
  14 |   }
  15 |
  16 |   async addImageLink(link) {
  17 |     await test.step(`Add image to the Card GalleryV2 widget on the structure page`, async () => {
  18 |       await this.plusButton.click();
  19 |       await this.linkButtonInModal.click();
  20 |       await this.inputBackgroundImageInModal.click();
  21 |       await this.inputBackgroundImageInModal.fill(link);
> 22 |       await this.addButtonInModal.click();
     |                                   ^ Error: locator.click: Test timeout of 30000ms exceeded.
  23 |     });
  24 |   }
  25 | }
  26 |
```