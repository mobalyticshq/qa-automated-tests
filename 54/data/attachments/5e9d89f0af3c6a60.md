# Test info

- Name: Checking role permissions >> Checking Admin permission >> Admin role can add VideoV2 widget (link) to the structure pages
- Location: /home/runner/work/qa-automated-tests/qa-automated-tests/tests/ngf.test.js:633:9

# Error details

```
Error: locator.click: Test timeout of 30000ms exceeded.
Call log:
  - waiting for getByText('Link')

    at /home/runner/work/qa-automated-tests/qa-automated-tests/src/page-object/stPage.js:130:36
    at StPage.addVideoInVideoV2Widget (/home/runner/work/qa-automated-tests/qa-automated-tests/src/page-object/stPage.js:121:5)
    at /home/runner/work/qa-automated-tests/qa-automated-tests/tests/ngf.test.js:646:7
```

# Page snapshot

```yaml
- dialog:
  - text: Add Section
  - button:
    - img
  - text: Column layout
  - button "1 column Column layout":
    - text: 1 column
    - img
  - text: Auto
  - button "Cancel"
  - button "Add Section"
```

# Test source

```ts
   30 |     this.resetButton = page.getByRole("button", { name: "Reset" });
   31 |     this.stPageTitle = page.getByTestId("document-controls-panel");
   32 |     this.controlPanel = page.getByTestId("document-controls-panel");
   33 |     this.headerV2Widget = page.getByRole("heading", { name: "ZZZ Header V2" });
   34 |     this.documentDiscoveryWidget = page.locator("section").nth(4);
   35 |     this.cardGalleryV2Button = page.getByRole("menuitem", {
   36 |       name: "Cards Gallery V2 Cards",
   37 |     });
   38 |     this.column1Auto = page
   39 |       .getByRole("button")
   40 |       .filter({ hasText: /^$/ })
   41 |       .nth(1);
   42 |     this.column1AutoEditMode = page
   43 |       .getByRole("button", {
   44 |         name: "Edit ZZZ Header V2",
   45 |         exact: true,
   46 |       })
   47 |       .nth(1);
   48 |     this.addWidgetButton1 = page
   49 |       .getByRole("button", { name: "columnAuto" })
   50 |       .getByRole("button");
   51 |     this.addWidgetButton2 = page
   52 |       .getByRole("button", { name: "columnAuto Edit ZZZ Header V2" })
   53 |       .getByRole("button")
   54 |       .nth(4);
   55 |     this.dropdownMenuWidgets = page.getByText(
   56 |       "Card Grid V2Cards displayed in a grid with title, subtitle, and image.Cards"
   57 |     );
   58 |     this.headerV2Button = page.getByRole("menuitem", {
   59 |       name: "Header V2 Introduce users to",
   60 |     });
   61 |     this.inputCreateSaveModal = page.getByRole("textbox", {
   62 |       name: "Page Path",
   63 |     });
   64 |     this.buttonCreateSaveInModal = page.getByRole("button", {
   65 |       name: "Create and Save",
   66 |     });
   67 |     this.documentDiscoveryButton = page.getByRole("menuitem", {
   68 |       name: "Documents Discovery Discover",
   69 |     });
   70 |     this.seoModal = page.getByText("SEO settingsMeta titleMeta");
   71 |     this.videoV2Button = page.getByRole("menuitem", {
   72 |       name: "Video V2 Embed a video from a",
   73 |     });
   74 |     this.videoV2Widget = page.getByRole("heading", { name: "Video V2" });
   75 |     this.linkButtonVideoV2 = page.getByText("Link");
   76 |     this.inputVideoV2 = page.getByRole("textbox", {
   77 |       name: "YouTube, Twitch or Vimeo link",
   78 |     });
   79 |     this.headerV2PoE = page.locator("#container").getByText("PoE");
   80 |     this.headerV2Zzz = page.locator("#container").getByText("ZZZ");
   81 |     this.headerV2Nightreign = page
   82 |       .locator("#container")
   83 |       .getByText("Nightreign");
   84 |     this.headerV2Deadlock = page.locator("#container").getByText("Deadlock");
   85 |     this.headerV2Bazaar = page.locator("#container").getByText("The Bazaar");
   86 |     this.headerV2MarvelRivals = page
   87 |       .locator("#container")
   88 |       .getByText("Marvel Rivals");
   89 |     this.headerV2Mhw = page
   90 |       .locator("#container")
   91 |       .getByText("Monster Hunter Wilds");
   92 |   }
   93 |
   94 |   async clickCancelButton() {
   95 |     await test.step(`Click Ð¡ancel button on the control panel`, async () => {
   96 |       await this.cancelButton.click();
   97 |     });
   98 |   }
   99 |
  100 |   async addHeaderV2Widget() {
  101 |     await test.step(`Add HeaderV2 widget on the structure page`, async () => {
  102 |       await this.addSectionButton.click();
  103 |       await this.addSectionButtonInModal.click();
  104 |       await this.column1Auto.hover();
  105 |       await this.addWidgetButton1.click();
  106 |       await this.headerV2Button.click();
  107 |     });
  108 |   }
  109 |
  110 |   async addCardGalleryV2Widget() {
  111 |     await test.step(`Add HeaderV2 widget on the structure page`, async () => {
  112 |       await this.addSectionButton.click();
  113 |       await this.addSectionButtonInModal.click();
  114 |       await this.column1Auto.hover();
  115 |       await this.addWidgetButton1.click();
  116 |       await this.cardGalleryV2Button.click();
  117 |     });
  118 |   }
  119 |
  120 |   async addVideoInVideoV2Widget(link) {
  121 |     await test.step(`Add VideoV2 widget on the structure page`, async () => {
  122 |       await this.addSectionButton.click();
  123 |       await this.addSectionButtonInModal.click();
  124 |       await this.column1Auto.hover();
  125 |       await this.addWidgetButton1.click();
  126 |       // await this.dropdownMenuWidgets.evaluate((e) => (e.scrollTop += 700));
  127 |       await this.page.keyboard.press("ArrowUp");
  128 |       await this.page.keyboard.press("Enter");
  129 |       // await this.videoV2Button.click();
> 130 |       await this.linkButtonVideoV2.click();
      |                                    ^ Error: locator.click: Test timeout of 30000ms exceeded.
  131 |       await this.inputVideoV2.click();
  132 |       await this.inputVideoV2.fill(link);
  133 |     });
  134 |   }
  135 |
  136 |   async createStPage(uuid) {
  137 |     await test.step(`Save the structure page`, async () => {
  138 |       await this.buttonCreateSave.click();
  139 |       await this.inputCreateSaveModal.click();
  140 |       await this.inputCreateSaveModal.fill(uuid);
  141 |       await this.buttonCreateSaveInModal.click();
  142 |     });
  143 |   }
  144 |
  145 |   async publishStPage() {
  146 |     await test.step(`Publish the structure page`, async () => {
  147 |       await this.publishButton.click();
  148 |       await this.buttonPublishInModal.click();
  149 |     });
  150 |   }
  151 |
  152 |   async deleteStPage() {
  153 |     await test.step(`Delete the structure page`, async () => {
  154 |       await this.dotsButton.click();
  155 |       await this.deleteStPageButton.click();
  156 |       await this.buttonDeleteInModal.click();
  157 |     });
  158 |   }
  159 |
  160 |   async duplicateStPage(uuid) {
  161 |     await test.step(`Duplicate the structure page`, async () => {
  162 |       await this.dotsButton.click();
  163 |       await this.duplicateStPageButton.click();
  164 |
  165 |       // Waiting for new tab
  166 |       const [newPage] = await Promise.all([
  167 |         this.page.context().waitForEvent("page"),
  168 |       ]);
  169 |       // Switch to a new tab
  170 |       await newPage.waitForLoadState("networkidle");
  171 |
  172 |       // Creating new locators for the new tab
  173 |       const buttonCreateSave = newPage.getByTestId("ngf-st-create-button");
  174 |       const inputCreateSaveModal = newPage.getByRole("textbox", {
  175 |         name: "Page Path",
  176 |       });
  177 |       const buttonCreateSaveInModal = newPage.getByRole("button", {
  178 |         name: "Create and Save",
  179 |       });
  180 |
  181 |       // Performs actions
  182 |       await buttonCreateSave.click();
  183 |       await inputCreateSaveModal.click();
  184 |       await inputCreateSaveModal.fill(uuid);
  185 |       await buttonCreateSaveInModal.click();
  186 |     });
  187 |   }
  188 |
  189 |   async editStPage() {
  190 |     await test.step(`Add Document Discovery widget to the ST page in edit mode`, async () => {
  191 |       await this.editButton.click();
  192 |       await this.column1AutoEditMode.click();
  193 |       await this.addWidgetButton2.click();
  194 |       await this.documentDiscoveryButton.click();
  195 |       await this.saveDraftButton.click();
  196 |     });
  197 |   }
  198 |
  199 |   async openSeoModal() {
  200 |     await test.step(`Open SEO modal on the ST page`, async () => {
  201 |       await this.seoButton.click();
  202 |     });
  203 |   }
  204 | }
  205 |
```